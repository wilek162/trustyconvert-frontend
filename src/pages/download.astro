---
import MainLayout from '@/layouts/MainLayout.astro'
import { DownloadManager } from '@/components/features/DownloadManager'
import { UploadIcon } from 'lucide-react'

// Get job ID from URL
const jobId = Astro.url.searchParams.get('jobId') || ''

// Redirect to home if no job ID
if (!jobId) {
	return Astro.redirect('/')
}

const title = 'Download Your Converted File - TrustyConvert'
const description = 'Download your securely converted file from TrustyConvert.'
const alternateLanguages = [{ code: 'en', name: 'English' }]
---

<MainLayout title={title} description={description} alternateLanguages={alternateLanguages}>
	<div class="trusty-container py-12">
		<div class="mx-auto max-w-xl">
			<DownloadManager client:load jobId={jobId} />

			<div class="mt-12 text-center">
				<h2 class="mb-4 text-xl font-medium">Need to convert another file?</h2>
				<a href="/" class="btn btn-primary inline-flex items-center gap-2">
					<UploadIcon size={16} />
					Convert Another File
				</a>
			</div>
		</div>
	</div>
</MainLayout>

<style>
	:global(body) {
		background: linear-gradient(to bottom right, hsl(var(--background)), hsl(var(--muted)));
		min-height: 100vh;
	}
</style>
