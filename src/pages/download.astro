---
import Layout from '@/layouts/Layout.astro'
import { DownloadContent } from '@/components/features/Download/DownloadContent'
import { ArrowLeft } from 'lucide-react'

// Get task ID from URL
const taskId = Astro.url.searchParams.get('taskId')

// Redirect to home if no task ID
if (!taskId) {
  return Astro.redirect('/')
}
---

<Layout title="Download Converted File">
  <main class="container mx-auto px-4 py-8">
    <div class="max-w-2xl mx-auto space-y-8">
      <div class="flex items-center gap-4">
        <a href="/" class="text-muted-foreground hover:text-foreground transition-colors">
          <ArrowLeft  className="h-5 w-5" />
        </a>
        <h1 class="text-3xl font-bold">Download Your File</h1>
      </div>
      
      <div class="bg-card rounded-lg shadow-lg">
        <DownloadContent client:load taskId={taskId} />
      </div>

      <div class="text-center text-sm text-muted-foreground">
        <p>Need to convert another file?</p>
        <a href="/" class="text-primary hover:underline">Start a new conversion</a>
      </div>
    </div>
  </main>
</Layout>

<style>
  :global(body) {
    background: linear-gradient(to bottom right, hsl(var(--background)), hsl(var(--muted)));
    min-height: 100vh;
  }
</style>
