---
import { formatLocalizedPath } from '@/lib/i18n/config';

interface Props {
  href: string;
  className?: string;
  activeClass?: string;
}

const { href, className = '', activeClass = 'text-foreground' } = Astro.props;
const currentLang = (Astro.locals as any).lang || 'en';
const localizedHref = formatLocalizedPath(href, currentLang);

// Check if this link is active
const isActive = Astro.url.pathname === localizedHref || 
                Astro.url.pathname === `${localizedHref}/` || 
                (localizedHref !== '/' && Astro.url.pathname.startsWith(`${localizedHref}/`));
                
const classes = `${className} ${isActive ? activeClass : 'text-muted-foreground'}`;
---
<a href={localizedHref} class={classes}>
  <slot />
</a> 