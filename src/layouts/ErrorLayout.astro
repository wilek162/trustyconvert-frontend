---
import "@styles/global.css";
import "@styles/utilities.css";
import ErrorDisplay from "@/components/common/ErrorDisplay.astro";

import MainLayout from "./mainLayout.astro";

interface Props {
  title: string;
  error: { message: string };
  statusCode?: number;
}

const { title, error, statusCode = 500 } = Astro.props;

// Set the response status code
Astro.response.status = statusCode;

const description = `Error ${statusCode}: ${error.message || "An unexpected error occurred"}`;
const canonical = new URL(Astro.url.pathname, Astro.site).toString();
---

<MainLayout
  title={title}
  description={description}
  canonical={canonical}
  ogImage="/og-error.png"
>
  <section class="container mx-auto py-12 px-4">
    <div class="max-w-xl mx-auto">
      <h1 class="text-4xl font-bold mb-8 text-balance">
        {title}
      </h1>
      <ErrorDisplay error={error} class="mb-8" />
      <a
        href="/"
        class="inline-flex items-center gap-2 text-primary hover:underline"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="w-4 h-4"
        >
          <path d="m12 19-7-7 7-7"></path>
          <path d="M19 12H5"></path>
        </svg>
        Return to Home
      </a>
    </div>
  </section>
</MainLayout>

<style>
  section {
    min-height: calc(100vh - var(--header-height) - var(--footer-height));
    display: grid;
    place-items: center;
  }
</style>
